const pad=t=>t.toString().padStart(2,"0"),formatDate=(t,e="-")=>[t.getFullYear(),pad(t.getMonth()+1),pad(t.getDate())].join(e)+" "+[pad(t.getHours()),pad(t.getMinutes()),pad(t.getSeconds())].join(":");async function getVisitorIP(){try{let t=await fetch("https://api.ipify.org?format=json"),e=await t.json();return e.ip}catch(a){return console.error("Error fetching IP address:",a),"Unknown IP"}}async function persistVisits(){let t=new Headers;t.append("Content-Type","application/json");let e=await fetch("https://bluegill-cute-leopard.ngrok-free.app/save-visits.php",{method:"POST",body:JSON.stringify(localStorage.getItem(VISITS_KEY)),headers:t});!0===e.ok&&200===e.status&&localStorage.setItem(VISITS_KEY,JSON.stringify([]))}async function trackVisitor(){let t=await getVisitorIP(),e=formatDate(new Date),a=JSON.parse(localStorage.getItem(VISITS_KEY))||[];a.push({ip:t,time:e,app}),localStorage.setItem(VISITS_KEY,JSON.stringify(a)),persistVisits()}